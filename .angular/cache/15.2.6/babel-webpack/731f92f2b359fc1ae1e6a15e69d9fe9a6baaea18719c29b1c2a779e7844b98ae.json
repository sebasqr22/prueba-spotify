{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class DiskComponent {\n  constructor(authService, route) {\n    this.authService = authService;\n    this.route = route;\n    this.usuario = \"\";\n    this.apiUrl = 'https://api.spotify.com/v1/me';\n    this.spotifyApi = this.authService.getApi();\n  }\n  ngOnInit() {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if (!tieneError) {\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&').find(fragment => fragment.includes('access_token')).split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks();\n    } else {\n      this.logout();\n    }\n  }\n  getMe() {\n    var a = this.authService.getApi().getMe();\n    a.then(data => {\n      const elemento = document.getElementById('nombreCliente');\n      if (data.display_name) {\n        elemento.outerHTML = data.display_name;\n      } else {\n        elemento.outerHTML = data.id;\n      }\n    });\n  }\n  abrir(link) {\n    window.open(link, '_blank');\n  }\n  ponerFoto(link) {\n    const album = document.getElementById('fotoAlbum');\n    album.style.backgroundImage = `url('${link}')`;\n  }\n  getMyTracks() {\n    this.authService.getApi().getMyTopTracks({\n      time_range: `long_term`,\n      limit: 10\n    }).then(response => {\n      this.ponerFoto(response.items[0].album.images[0].url);\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i + 1}`);\n        cancion.innerHTML = `${i + 1}. ${response.items[i].name}`;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, err => {\n      this.logout();\n    });\n  }\n  logout() {\n    this.authService.logout();\n  }\n}\nDiskComponent.ɵfac = function DiskComponent_Factory(t) {\n  return new (t || DiskComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\nDiskComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DiskComponent,\n  selectors: [[\"app-disk\"]],\n  decls: 28,\n  vars: 1,\n  consts: [[\"id\", \"img\", 2, \"position\", \"relative\", \"left\", \"0\", \"top\", \"0\"], [\"id\", \"fotoAlbum\", 1, \"album-cover\", \"eye\"], [1, \"vinyl-cover\"], [1, \"album-info\"], [\"id\", \"nombreCliente\"], [1, \"song-list\"], [1, \"column\"], [\"id\", \"cancion1\", 1, \"back\"], [\"id\", \"cancion2\", 1, \"back\"], [\"id\", \"cancion3\", 1, \"back\"], [\"id\", \"cancion4\", 1, \"back\"], [\"id\", \"cancion5\", 1, \"back\"], [\"id\", \"cancion6\", 1, \"back\"], [\"id\", \"cancion7\", 1, \"back\"], [\"id\", \"cancion8\", 1, \"back\"], [\"id\", \"cancion9\", 1, \"back\"], [\"id\", \"cancion10\", 1, \"back\"], [\"src\", \"assets/ase.png\", 1, \"heaven\"], [3, \"click\"]],\n  template: function DiskComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1);\n      i0.ɵɵelement(4, \"div\", 2);\n      i0.ɵɵelementStart(5, \"div\", 3)(6, \"h1\");\n      i0.ɵɵtext(7, \"Nombre del \\u00C1lbum\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"h2\", 4);\n      i0.ɵɵtext(9, \"Artista\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6)(12, \"ul\");\n      i0.ɵɵelement(13, \"li\", 7)(14, \"li\", 8)(15, \"li\", 9)(16, \"li\", 10)(17, \"li\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 6)(19, \"ul\");\n      i0.ɵɵelement(20, \"li\", 12)(21, \"li\", 13)(22, \"li\", 14)(23, \"li\", 15)(24, \"li\", 16);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelement(25, \"img\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_26_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(27, \"Logout\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.usuario);\n    }\n  },\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 724:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nSyntaxError\\\\n\\\\n(31:5) /Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.css Unknown word\\\\n\\\\n \\\\u001b[90m 29 | \\\\u001b[39m\\\\n \\\\u001b[90m 30 | \\\\u001b[39m\\\\u001b[33m.back\\\\u001b[39m\\\\u001b[33m{\\\\u001b[39m\\\\n\\\\u001b[1m\\\\u001b[31m>\\\\u001b[39m\\\\u001b[22m\\\\u001b[90m 31 | \\\\u001b[39m    font-\\\\n \\\\u001b[90m    | \\\\u001b[39m    \\\\u001b[1m\\\\u001b[31m^\\\\u001b[39m\\\\u001b[22m\\\\n \\\\u001b[90m 32 | \\\\u001b[39m\\\\u001b[33m}\\\\u001b[39m\\\\n \\\\u001b[90m 33 | \\\\u001b[39m\\\\n\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[724]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=disk.component.css.map*/\"]\n});\nDiskComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DiskComponent,\n  factory: DiskComponent.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["DiskComponent","constructor","authService","route","spotifyApi","getApi","ngOnInit","tieneError","snapshot","queryParams","undefined","token","fragment","split","find","includes","setAccessToken","getMe","getMyTracks","logout","a","then","data","elemento","document","getElementById","display_name","outerHTML","id","abrir","link","window","open","ponerFoto","album","style","backgroundImage","getMyTopTracks","time_range","limit","response","items","images","url","i","length","cancion","innerHTML","name","className","addEventListener","uri","err","selectors","decls","vars","consts","template","i0","ctx","factory","providedIn"],"sourceRoot":"","sources":["/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.ts","/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.html"],"sourcesContent":["import {Component, Injectable, OnInit} from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport { ActivatedRoute } from '@angular/router';\nimport { from } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\n@Component({\n  selector: 'app-disk',\n  templateUrl: './disk.component.html',\n  styleUrls: ['./disk.component.css']\n})\nexport class DiskComponent implements OnInit{\n  private spotifyApi: SpotifyWebApi.SpotifyWebApiJs;\n  usuario: string | undefined = \"\";\n  private apiUrl = 'https://api.spotify.com/v1/me';\n  constructor(private authService: AuthService, private route: ActivatedRoute) {\n    this.spotifyApi = this.authService.getApi();\n  }\n  \n  ngOnInit(): void {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if(!tieneError){\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&')\n          .find(fragment => fragment.includes('access_token'))\n          .split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks();\n    }\n    else{\n      this.logout();\n    }\n  }\n  \n  getMe(){\n   var a = this.authService.getApi().getMe()\n   a.then((data) =>{\n     const elemento = document.getElementById('nombreCliente') as HTMLInputElement\n     if(data.display_name){\n       elemento.outerHTML = data.display_name;\n     }\n     else{\n       elemento.outerHTML = data.id;\n     }\n    })\n  }\n  \n  abrir(link:string){\n    window.open(link, '_blank');\n  }\n  \n  ponerFoto(link:string){\n    const album = document.getElementById('fotoAlbum') as HTMLInputElement\n    album.style.backgroundImage = `url('${link}')`\n  }\n  getMyTracks(){\n    this.authService.getApi().getMyTopTracks({\n      time_range: `long_term`,\n      limit:10,\n    }).then((response) => {\n      this.ponerFoto(response.items[0].album.images[0].url)\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i+1}`) as HTMLInputElement\n        cancion.innerHTML = `${i+1}. ${response.items[i].name}`;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, (err) =>{\n      this.logout();\n    })\n  }\n  \n  logout(){\n    this.authService.logout()\n  }\n}\n","<h1>{{usuario}}</h1>\n<div style=\"position: relative; left: 0; top: 0;\" id=\"img\">\n    <div id=\"fotoAlbum\" class=\"album-cover eye\">\n        <div class=\"vinyl-cover\"></div>\n        <div class=\"album-info\">\n            <h1>Nombre del Álbum</h1>\n            <h2 id=\"nombreCliente\">Artista</h2>\n            <div class=\"song-list\">\n                <div class=\"column\">\n                    <ul>\n                        <li id=\"cancion1\" class=\"back\"></li>\n                        <li id=\"cancion2\" class=\"back\"></li>\n                        <li id=\"cancion3\" class=\"back\"></li>\n                        <li id=\"cancion4\" class=\"back\"></li>\n                        <li id=\"cancion5\" class=\"back\"></li>\n                    </ul>\n                </div>\n                <div class=\"column\">\n                    <ul>\n                        <li id=\"cancion6\" class=\"back\"></li>\n                        <li id=\"cancion7\" class=\"back\"></li>\n                        <li id=\"cancion8\" class=\"back\"></li>\n                        <li id=\"cancion9\" class=\"back\"></li>\n                        <li id=\"cancion10\" class=\"back\"></li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <img src=\"assets/ase.png\" class=\"heaven\"/>\n</div> \n\n<button (click)=\"logout()\">Logout</button>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}