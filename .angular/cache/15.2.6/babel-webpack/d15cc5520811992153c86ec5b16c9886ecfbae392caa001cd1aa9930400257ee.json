{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth.service\";\nexport class DiskComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.accessToken = null;\n    const urlParams = new URLSearchParams(window.location.hash.substring(1));\n    this.accessToken = urlParams.get('access_token');\n  }\n  ngOnInit() {\n    if (typeof this.accessToken === \"string\") {\n      localStorage.setItem('access_token', this.accessToken);\n    }\n    this.getTopTracks();\n  }\n  setToken(token) {\n    // establece la cookie con el nombre 'spotify_token' y un valor de 'token'\n    this.cookieService.set('spotify_token', token, null, '/');\n  }\n  getTopTracks() {\n    // Obtener el token de acceso del servicio AuthService\n    const accessToken = this.accessToken;\n    // Construir las opciones de la solicitud\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': `Bearer ${accessToken}`\n      })\n    };\n    // Obtener la fecha actual\n    const now = new Date();\n    // Obtener la fecha de hace un mes\n    const lastMonth = new Date();\n    lastMonth.setMonth(now.getMonth() - 1);\n    // Formatear las fechas para incluirlas en la solicitud\n    const nowStr = now.toISOString().substring(0, 10);\n    const lastMonthStr = lastMonth.toISOString().substring(0, 10);\n    // Construir la URL de la solicitud\n    const url = `https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=10&offset=0`;\n    // Realizar la solicitud a la API de Spotify\n    this.http.get(url, httpOptions).subscribe(response => {\n      console.log(response.items);\n      // Aquí puedes procesar la respuesta y mostrar las canciones en el componente\n    }, error => {\n      console.error(error);\n    });\n  }\n  logout() {\n    this.authService.logout();\n  }\n}\nDiskComponent.ɵfac = function DiskComponent_Factory(t) {\n  return new (t || DiskComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService));\n};\nDiskComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DiskComponent,\n  selectors: [[\"app-disk\"]],\n  decls: 37,\n  vars: 0,\n  consts: [[\"id\", \"img\", 2, \"position\", \"relative\", \"left\", \"0\", \"top\", \"0\"], [\"albumCover\", \"\"], [1, \"album-cover\", \"eye\"], [1, \"vinyl-cover\"], [1, \"album-info\"], [1, \"song-list\"], [1, \"column\"], [\"src\", \"assets/ase.png\", 1, \"heaven\"], [3, \"click\"]],\n  template: function DiskComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"h1\");\n      i0.ɵɵtext(6, \"Nombre del \\u00C1lbum\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"h2\");\n      i0.ɵɵtext(8, \"Artista\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 5)(10, \"div\", 6)(11, \"ul\")(12, \"li\");\n      i0.ɵɵtext(13, \"Canci\\u00F3n 1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"li\");\n      i0.ɵɵtext(15, \"Canci\\u00F3n 2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"li\");\n      i0.ɵɵtext(17, \"Canci\\u00F3n 3\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"li\");\n      i0.ɵɵtext(19, \"Canci\\u00F3n 4\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"li\");\n      i0.ɵɵtext(21, \"Canci\\u00F3n 5\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"div\", 6)(23, \"ul\")(24, \"li\");\n      i0.ɵɵtext(25, \"Canci\\u00F3n 6\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"li\");\n      i0.ɵɵtext(27, \"Canci\\u00F3n 7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"li\");\n      i0.ɵɵtext(29, \"Canci\\u00F3n 8\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"li\");\n      i0.ɵɵtext(31, \"Canci\\u00F3n 9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"li\");\n      i0.ɵɵtext(33, \"Canci\\u00F3n 10\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelement(34, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_35_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(36, \"Logout\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".album-cover[_ngcontent-%COMP%] {\\n    position: relative;\\n    width: 400px;\\n    height: 400px;\\n    background-image: url('bunny.jpeg');\\n    background-color: black;\\n    background-size: cover;\\n    background-position: center;\\n    background-blur: 5px;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    overflow: hidden;\\n    z-index: 0;\\n    box-shadow: 6px 10px 10px black;\\n}\\n\\n.album-info[_ngcontent-%COMP%] {\\n    text-align: center;\\n    color: #fff;\\n    z-index: 2;\\n}\\n\\n.album-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n    font-size: 28px;\\n    margin-bottom: 10px;\\n}\\n\\n.album-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    font-size: 18px;\\n}\\n\\n.song-list[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-top: 20px;\\n    width: 100%;\\n}\\n\\n.column[_ngcontent-%COMP%] {\\n    width: 45%;\\n}\\n\\n.column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n    list-style: none;\\n    padding: 0;\\n}\\n\\n.column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    margin-bottom: 10px;\\n    font-size: 14px;\\n}\\n\\n.eye[_ngcontent-%COMP%]{\\n    position:absolute;\\n    top: 40px;\\n    left : 40px;\\n    z-index: 1;\\n}\\n\\n.heaven[_ngcontent-%COMP%]\\n{\\n    position:absolute;\\n    height:400px;\\n    width:400px;\\n    margin-left: 230px;\\n    margin-top: 42px;\\n    z-index: -1;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGlzay9kaXNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGFBQWE7SUFDYixtQ0FBOEM7SUFDOUMsdUJBQXVCO0lBQ3ZCLHNCQUFzQjtJQUN0QiwyQkFBMkI7SUFDM0Isb0JBQW9CO0lBQ3BCLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsVUFBVTtJQUNWLCtCQUErQjtBQUNuQzs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsVUFBVTtBQUNkOztBQUVBO0lBQ0ksZUFBZTtJQUNmLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsU0FBUztJQUNULFdBQVc7SUFDWCxVQUFVO0FBQ2Q7O0FBRUE7O0lBRUksaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyIuYWxidW0tY292ZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogNDAwcHg7XG4gICAgaGVpZ2h0OiA0MDBweDtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ3NyYy9hc3NldHMvYnVubnkuanBlZycpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQtYmx1cjogNXB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgei1pbmRleDogMDtcbiAgICBib3gtc2hhZG93OiA2cHggMTBweCAxMHB4IGJsYWNrO1xufVxuXG4uYWxidW0taW5mbyB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIHotaW5kZXg6IDI7XG59XG5cbi5hbGJ1bS1pbmZvIGgxIHtcbiAgICBmb250LXNpemU6IDI4cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbn1cblxuLmFsYnVtLWluZm8gaDIge1xuICAgIGZvbnQtc2l6ZTogMThweDtcbn1cblxuLnNvbmctbGlzdCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuLmNvbHVtbiB7XG4gICAgd2lkdGg6IDQ1JTtcbn1cblxuLmNvbHVtbiB1bCB7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBwYWRkaW5nOiAwO1xufVxuXG4uY29sdW1uIHVsIGxpIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbn1cblxuLmV5ZXtcbiAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICB0b3A6IDQwcHg7XG4gICAgbGVmdCA6IDQwcHg7XG4gICAgei1pbmRleDogMTtcbn1cblxuLmhlYXZlblxue1xuICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgIGhlaWdodDo0MDBweDtcbiAgICB3aWR0aDo0MDBweDtcbiAgICBtYXJnaW4tbGVmdDogMjMwcHg7XG4gICAgbWFyZ2luLXRvcDogNDJweDtcbiAgICB6LWluZGV4OiAtMTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","DiskComponent","constructor","http","authService","urlParams","URLSearchParams","window","location","hash","substring","accessToken","get","ngOnInit","localStorage","setItem","getTopTracks","setToken","token","cookieService","set","httpOptions","headers","now","Date","lastMonth","setMonth","getMonth","nowStr","toISOString","lastMonthStr","url","subscribe","response","console","log","items","error","logout","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.ts","/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-disk',\n  templateUrl: './disk.component.html',\n  styleUrls: ['./disk.component.css']\n})\nexport class DiskComponent implements OnInit{\n  accessToken: string | null = null;\n\n  constructor(private http: HttpClient, private authService: AuthService) {\n    const urlParams = new URLSearchParams(window.location.hash.substring(1));\n    this.accessToken = urlParams.get('access_token');\n  }\n  \n  ngOnInit() {\n    if (typeof this.accessToken === \"string\") {\n      localStorage.setItem('access_token', this.accessToken);\n    }\n    this.getTopTracks()\n  }\n  setToken(token: string) {\n    // establece la cookie con el nombre 'spotify_token' y un valor de 'token'\n    this.cookieService.set('spotify_token', token, null, '/');\n  }\n  getTopTracks() {\n    // Obtener el token de acceso del servicio AuthService\n    const accessToken = this.accessToken;\n\n    // Construir las opciones de la solicitud\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': `Bearer ${accessToken}`\n      })\n    };\n\n    // Obtener la fecha actual\n    const now = new Date();\n\n    // Obtener la fecha de hace un mes\n    const lastMonth = new Date();\n    lastMonth.setMonth(now.getMonth() - 1);\n\n    // Formatear las fechas para incluirlas en la solicitud\n    const nowStr = now.toISOString().substring(0, 10);\n    const lastMonthStr = lastMonth.toISOString().substring(0, 10);\n\n    // Construir la URL de la solicitud\n    const url = `https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=10&offset=0`;\n\n    // Realizar la solicitud a la API de Spotify\n    this.http.get(url, httpOptions).subscribe(\n        (response: any) => {\n          console.log(response.items);\n          // Aquí puedes procesar la respuesta y mostrar las canciones en el componente\n        },\n        (error: any) => {\n          console.error(error);\n        }\n    );\n  }\n\n  logout() {\n    this.authService.logout();\n  }\n\n}\n","<div #albumCover style=\"position: relative; left: 0; top: 0;\" id=\"img\">\n    <div class=\"album-cover eye\">\n        <div class=\"vinyl-cover\"></div>\n        <div class=\"album-info\">\n            <h1>Nombre del Álbum</h1>\n            <h2>Artista</h2>\n            <div class=\"song-list\">\n                <div class=\"column\">\n                    <ul>\n                        <li>Canción 1</li>\n                        <li>Canción 2</li>\n                        <li>Canción 3</li>\n                        <li>Canción 4</li>\n                        <li>Canción 5</li>\n                    </ul>\n                </div>\n                <div class=\"column\">\n                    <ul>\n                        <li>Canción 6</li>\n                        <li>Canción 7</li>\n                        <li>Canción 8</li>\n                        <li>Canción 9</li>\n                        <li>Canción 10</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <img src=\"assets/ase.png\" class=\"heaven\"/>\n</div>\n\n<button (click)=\"logout()\">Logout</button>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}