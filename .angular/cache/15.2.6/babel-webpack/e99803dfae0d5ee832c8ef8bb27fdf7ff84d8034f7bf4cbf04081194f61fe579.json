{"ast":null,"code":"import _asyncToGenerator from \"/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _asyncIterator from \"/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNode } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { debug } from './Debug.js';\nimport { CDPElementHandle } from './ElementHandle.js';\nimport { TimeoutError } from './Errors.js';\nimport { CDPJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n/**\n * @internal\n */\nexport function getExceptionMessage(exceptionDetails) {\n  if (exceptionDetails.exception) {\n    return exceptionDetails.exception.description || exceptionDetails.exception.value;\n  }\n  let message = exceptionDetails.text;\n  if (exceptionDetails.stackTrace) {\n    for (const callframe of exceptionDetails.stackTrace.callFrames) {\n      const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n      const functionName = callframe.functionName || '<anonymous>';\n      message += `\\n    at ${functionName} (${location})`;\n    }\n  }\n  return message;\n}\n/**\n * @internal\n */\nexport function valueFromRemoteObject(remoteObject) {\n  assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n  return remoteObject.value;\n}\n/**\n * @internal\n */\nexport function releaseObject(_x, _x2) {\n  return _releaseObject.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _releaseObject() {\n  _releaseObject = _asyncToGenerator(function* (client, remoteObject) {\n    if (!remoteObject.objectId) {\n      return;\n    }\n    yield client.send('Runtime.releaseObject', {\n      objectId: remoteObject.objectId\n    }).catch(error => {\n      // Exceptions might happen in case of a page been navigated or closed.\n      // Swallow these since they are harmless and we don't leak anything in this case.\n      debugError(error);\n    });\n  });\n  return _releaseObject.apply(this, arguments);\n}\nexport function addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\n/**\n * @internal\n */\nexport function removeEventListeners(listeners) {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\n/**\n * @internal\n */\nexport const isString = obj => {\n  return typeof obj === 'string' || obj instanceof String;\n};\n/**\n * @internal\n */\nexport const isNumber = obj => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\n/**\n * @internal\n */\nexport const isPlainObject = obj => {\n  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Object;\n};\n/**\n * @internal\n */\nexport const isRegExp = obj => {\n  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === RegExp;\n};\n/**\n * @internal\n */\nexport const isDate = obj => {\n  return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Date;\n};\n/**\n * @internal\n */\nexport function waitForEvent(_x3, _x4, _x5, _x6, _x7) {\n  return _waitForEvent.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _waitForEvent() {\n  _waitForEvent = _asyncToGenerator(function* (emitter, eventName, predicate, timeout, abortPromise) {\n    let eventTimeout;\n    let resolveCallback;\n    let rejectCallback;\n    const promise = new Promise((resolve, reject) => {\n      resolveCallback = resolve;\n      rejectCallback = reject;\n    });\n    const listener = addEventListener(emitter, eventName, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (event) {\n        if (!(yield predicate(event))) {\n          return;\n        }\n        resolveCallback(event);\n      });\n      return function (_x17) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    if (timeout) {\n      eventTimeout = setTimeout(() => {\n        rejectCallback(new TimeoutError('Timeout exceeded while waiting for event'));\n      }, timeout);\n    }\n    function cleanup() {\n      removeEventListeners([listener]);\n      clearTimeout(eventTimeout);\n    }\n    const result = yield Promise.race([promise, abortPromise]).then(r => {\n      cleanup();\n      return r;\n    }, error => {\n      cleanup();\n      throw error;\n    });\n    if (isErrorLike(result)) {\n      throw result;\n    }\n    return result;\n  });\n  return _waitForEvent.apply(this, arguments);\n}\nexport function createJSHandle(context, remoteObject) {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new CDPElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new CDPJSHandle(context, remoteObject);\n}\n/**\n * @internal\n */\nexport function evaluationString(fun, ...args) {\n  if (isString(fun)) {\n    assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n/**\n * @internal\n */\nexport function addPageBinding(type, name) {\n  // This is the CDP binding.\n  // @ts-expect-error: In a different context.\n  const callCDP = globalThis[name];\n  // We replace the CDP binding with a Puppeteer binding.\n  Object.assign(globalThis, {\n    [name](...args) {\n      var _a, _b, _c;\n      // This is the Puppeteer binding.\n      // @ts-expect-error: In a different context.\n      const callPuppeteer = globalThis[name];\n      (_a = callPuppeteer.args) !== null && _a !== void 0 ? _a : callPuppeteer.args = new Map();\n      (_b = callPuppeteer.callbacks) !== null && _b !== void 0 ? _b : callPuppeteer.callbacks = new Map();\n      const seq = ((_c = callPuppeteer.lastSeq) !== null && _c !== void 0 ? _c : 0) + 1;\n      callPuppeteer.lastSeq = seq;\n      callPuppeteer.args.set(seq, args);\n      callCDP(JSON.stringify({\n        type,\n        name,\n        seq,\n        args,\n        isTrivial: !args.some(value => {\n          return value instanceof Node;\n        })\n      }));\n      return new Promise((resolve, reject) => {\n        callPuppeteer.callbacks.set(seq, {\n          resolve(value) {\n            callPuppeteer.args.delete(seq);\n            resolve(value);\n          },\n          reject(value) {\n            callPuppeteer.args.delete(seq);\n            reject(value);\n          }\n        });\n      });\n    }\n  });\n}\n/**\n * @internal\n */\nexport function pageBindingInitString(type, name) {\n  return evaluationString(addPageBinding, type, name);\n}\n/**\n * @internal\n */\nexport function waitWithTimeout(_x8, _x9, _x10) {\n  return _waitWithTimeout.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _waitWithTimeout() {\n  _waitWithTimeout = _asyncToGenerator(function* (promise, taskName, timeout) {\n    let reject;\n    const timeoutError = new TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n    const timeoutPromise = new Promise((_, rej) => {\n      return reject = rej;\n    });\n    let timeoutTimer = null;\n    if (timeout) {\n      timeoutTimer = setTimeout(() => {\n        return reject(timeoutError);\n      }, timeout);\n    }\n    try {\n      return yield Promise.race([promise, timeoutPromise]);\n    } finally {\n      if (timeoutTimer) {\n        clearTimeout(timeoutTimer);\n      }\n    }\n  });\n  return _waitWithTimeout.apply(this, arguments);\n}\nlet fs = null;\n/**\n * @internal\n */\nexport function importFSPromises() {\n  return _importFSPromises.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _importFSPromises() {\n  _importFSPromises = _asyncToGenerator(function* () {\n    if (!fs) {\n      try {\n        fs = yield import('fs/promises');\n      } catch (error) {\n        if (error instanceof TypeError) {\n          throw new Error('Cannot write to a path outside of a Node-like environment.');\n        }\n        throw error;\n      }\n    }\n    return fs;\n  });\n  return _importFSPromises.apply(this, arguments);\n}\nexport function getReadableAsBuffer(_x11, _x12) {\n  return _getReadableAsBuffer.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _getReadableAsBuffer() {\n  _getReadableAsBuffer = _asyncToGenerator(function* (readable, path) {\n    const buffers = [];\n    if (path) {\n      const fs = yield importFSPromises();\n      const fileHandle = yield fs.open(path, 'w+');\n      var _iteratorAbruptCompletion = false;\n      var _didIteratorError = false;\n      var _iteratorError;\n      try {\n        for (var _iterator = _asyncIterator(readable), _step; _iteratorAbruptCompletion = !(_step = yield _iterator.next()).done; _iteratorAbruptCompletion = false) {\n          const chunk = _step.value;\n          {\n            buffers.push(chunk);\n            yield fileHandle.writeFile(chunk);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (_iteratorAbruptCompletion && _iterator.return != null) {\n            yield _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n      yield fileHandle.close();\n    } else {\n      var _iteratorAbruptCompletion2 = false;\n      var _didIteratorError2 = false;\n      var _iteratorError2;\n      try {\n        for (var _iterator2 = _asyncIterator(readable), _step2; _iteratorAbruptCompletion2 = !(_step2 = yield _iterator2.next()).done; _iteratorAbruptCompletion2 = false) {\n          const chunk = _step2.value;\n          {\n            buffers.push(chunk);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (_iteratorAbruptCompletion2 && _iterator2.return != null) {\n            yield _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n    try {\n      return Buffer.concat(buffers);\n    } catch (error) {\n      return null;\n    }\n  });\n  return _getReadableAsBuffer.apply(this, arguments);\n}\nexport function getReadableFromProtocolStream(_x13, _x14) {\n  return _getReadableFromProtocolStream.apply(this, arguments);\n}\n/**\n * @internal\n */\nfunction _getReadableFromProtocolStream() {\n  _getReadableFromProtocolStream = _asyncToGenerator(function* (client, handle) {\n    // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n    // ReadableStream.\n    if (!isNode) {\n      throw new Error('Cannot create a stream outside of Node.js environment.');\n    }\n    const {\n      Readable\n    } = yield import('stream');\n    let eof = false;\n    return new Readable({\n      read(size) {\n        var _this = this;\n        return _asyncToGenerator(function* () {\n          if (eof) {\n            return;\n          }\n          const response = yield client.send('IO.read', {\n            handle,\n            size\n          });\n          _this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n          if (response.eof) {\n            eof = true;\n            yield client.send('IO.close', {\n              handle\n            });\n            _this.push(null);\n          }\n        })();\n      }\n    });\n  });\n  return _getReadableFromProtocolStream.apply(this, arguments);\n}\nexport function setPageContent(_x15, _x16) {\n  return _setPageContent.apply(this, arguments);\n}\nfunction _setPageContent() {\n  _setPageContent = _asyncToGenerator(function* (page, content) {\n    // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n    // lifecycle event. @see https://crrev.com/608658\n    return page.evaluate(html => {\n      document.open();\n      document.write(html);\n      document.close();\n    }, content);\n  });\n  return _setPageContent.apply(this, arguments);\n}","map":{"version":3,"names":["isNode","assert","isErrorLike","debug","CDPElementHandle","TimeoutError","CDPJSHandle","debugError","getExceptionMessage","exceptionDetails","exception","description","value","message","text","stackTrace","callframe","callFrames","location","url","lineNumber","columnNumber","functionName","valueFromRemoteObject","remoteObject","objectId","unserializableValue","type","BigInt","replace","NaN","Infinity","Error","releaseObject","client","send","catch","error","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","length","isString","obj","String","isNumber","Number","isPlainObject","constructor","Object","isRegExp","RegExp","isDate","Date","waitForEvent","predicate","timeout","abortPromise","eventTimeout","resolveCallback","rejectCallback","promise","Promise","resolve","reject","event","setTimeout","cleanup","clearTimeout","result","race","then","r","createJSHandle","context","subtype","_world","frame","evaluationString","fun","args","serializeArgument","arg","is","undefined","JSON","stringify","map","join","addPageBinding","name","callCDP","globalThis","assign","_a","_b","_c","callPuppeteer","Map","callbacks","seq","lastSeq","set","isTrivial","some","Node","delete","pageBindingInitString","waitWithTimeout","taskName","timeoutError","timeoutPromise","_","rej","timeoutTimer","fs","importFSPromises","TypeError","getReadableAsBuffer","readable","path","buffers","fileHandle","open","chunk","push","writeFile","close","Buffer","concat","getReadableFromProtocolStream","handle","Readable","eof","read","size","response","data","base64Encoded","setPageContent","page","content","evaluate","html","document","write"],"sources":["/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/node_modules/puppeteer-core/lib/esm/puppeteer/common/util.js"],"sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNode } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { debug } from './Debug.js';\nimport { CDPElementHandle } from './ElementHandle.js';\nimport { TimeoutError } from './Errors.js';\nimport { CDPJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n/**\n * @internal\n */\nexport function getExceptionMessage(exceptionDetails) {\n    if (exceptionDetails.exception) {\n        return (exceptionDetails.exception.description || exceptionDetails.exception.value);\n    }\n    let message = exceptionDetails.text;\n    if (exceptionDetails.stackTrace) {\n        for (const callframe of exceptionDetails.stackTrace.callFrames) {\n            const location = callframe.url +\n                ':' +\n                callframe.lineNumber +\n                ':' +\n                callframe.columnNumber;\n            const functionName = callframe.functionName || '<anonymous>';\n            message += `\\n    at ${functionName} (${location})`;\n        }\n    }\n    return message;\n}\n/**\n * @internal\n */\nexport function valueFromRemoteObject(remoteObject) {\n    assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n    if (remoteObject.unserializableValue) {\n        if (remoteObject.type === 'bigint') {\n            return BigInt(remoteObject.unserializableValue.replace('n', ''));\n        }\n        switch (remoteObject.unserializableValue) {\n            case '-0':\n                return -0;\n            case 'NaN':\n                return NaN;\n            case 'Infinity':\n                return Infinity;\n            case '-Infinity':\n                return -Infinity;\n            default:\n                throw new Error('Unsupported unserializable value: ' +\n                    remoteObject.unserializableValue);\n        }\n    }\n    return remoteObject.value;\n}\n/**\n * @internal\n */\nexport async function releaseObject(client, remoteObject) {\n    if (!remoteObject.objectId) {\n        return;\n    }\n    await client\n        .send('Runtime.releaseObject', { objectId: remoteObject.objectId })\n        .catch(error => {\n        // Exceptions might happen in case of a page been navigated or closed.\n        // Swallow these since they are harmless and we don't leak anything in this case.\n        debugError(error);\n    });\n}\n/**\n * @internal\n */\nexport function addEventListener(emitter, eventName, handler) {\n    emitter.on(eventName, handler);\n    return { emitter, eventName, handler };\n}\n/**\n * @internal\n */\nexport function removeEventListeners(listeners) {\n    for (const listener of listeners) {\n        listener.emitter.removeListener(listener.eventName, listener.handler);\n    }\n    listeners.length = 0;\n}\n/**\n * @internal\n */\nexport const isString = (obj) => {\n    return typeof obj === 'string' || obj instanceof String;\n};\n/**\n * @internal\n */\nexport const isNumber = (obj) => {\n    return typeof obj === 'number' || obj instanceof Number;\n};\n/**\n * @internal\n */\nexport const isPlainObject = (obj) => {\n    return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Object;\n};\n/**\n * @internal\n */\nexport const isRegExp = (obj) => {\n    return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === RegExp;\n};\n/**\n * @internal\n */\nexport const isDate = (obj) => {\n    return typeof obj === 'object' && (obj === null || obj === void 0 ? void 0 : obj.constructor) === Date;\n};\n/**\n * @internal\n */\nexport async function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n    let eventTimeout;\n    let resolveCallback;\n    let rejectCallback;\n    const promise = new Promise((resolve, reject) => {\n        resolveCallback = resolve;\n        rejectCallback = reject;\n    });\n    const listener = addEventListener(emitter, eventName, async (event) => {\n        if (!(await predicate(event))) {\n            return;\n        }\n        resolveCallback(event);\n    });\n    if (timeout) {\n        eventTimeout = setTimeout(() => {\n            rejectCallback(new TimeoutError('Timeout exceeded while waiting for event'));\n        }, timeout);\n    }\n    function cleanup() {\n        removeEventListeners([listener]);\n        clearTimeout(eventTimeout);\n    }\n    const result = await Promise.race([promise, abortPromise]).then(r => {\n        cleanup();\n        return r;\n    }, error => {\n        cleanup();\n        throw error;\n    });\n    if (isErrorLike(result)) {\n        throw result;\n    }\n    return result;\n}\n/**\n * @internal\n */\nexport function createJSHandle(context, remoteObject) {\n    if (remoteObject.subtype === 'node' && context._world) {\n        return new CDPElementHandle(context, remoteObject, context._world.frame());\n    }\n    return new CDPJSHandle(context, remoteObject);\n}\n/**\n * @internal\n */\nexport function evaluationString(fun, ...args) {\n    if (isString(fun)) {\n        assert(args.length === 0, 'Cannot evaluate a string with arguments');\n        return fun;\n    }\n    function serializeArgument(arg) {\n        if (Object.is(arg, undefined)) {\n            return 'undefined';\n        }\n        return JSON.stringify(arg);\n    }\n    return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n/**\n * @internal\n */\nexport function addPageBinding(type, name) {\n    // This is the CDP binding.\n    // @ts-expect-error: In a different context.\n    const callCDP = globalThis[name];\n    // We replace the CDP binding with a Puppeteer binding.\n    Object.assign(globalThis, {\n        [name](...args) {\n            var _a, _b, _c;\n            // This is the Puppeteer binding.\n            // @ts-expect-error: In a different context.\n            const callPuppeteer = globalThis[name];\n            (_a = callPuppeteer.args) !== null && _a !== void 0 ? _a : (callPuppeteer.args = new Map());\n            (_b = callPuppeteer.callbacks) !== null && _b !== void 0 ? _b : (callPuppeteer.callbacks = new Map());\n            const seq = ((_c = callPuppeteer.lastSeq) !== null && _c !== void 0 ? _c : 0) + 1;\n            callPuppeteer.lastSeq = seq;\n            callPuppeteer.args.set(seq, args);\n            callCDP(JSON.stringify({\n                type,\n                name,\n                seq,\n                args,\n                isTrivial: !args.some(value => {\n                    return value instanceof Node;\n                }),\n            }));\n            return new Promise((resolve, reject) => {\n                callPuppeteer.callbacks.set(seq, {\n                    resolve(value) {\n                        callPuppeteer.args.delete(seq);\n                        resolve(value);\n                    },\n                    reject(value) {\n                        callPuppeteer.args.delete(seq);\n                        reject(value);\n                    },\n                });\n            });\n        },\n    });\n}\n/**\n * @internal\n */\nexport function pageBindingInitString(type, name) {\n    return evaluationString(addPageBinding, type, name);\n}\n/**\n * @internal\n */\nexport async function waitWithTimeout(promise, taskName, timeout) {\n    let reject;\n    const timeoutError = new TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n    const timeoutPromise = new Promise((_, rej) => {\n        return (reject = rej);\n    });\n    let timeoutTimer = null;\n    if (timeout) {\n        timeoutTimer = setTimeout(() => {\n            return reject(timeoutError);\n        }, timeout);\n    }\n    try {\n        return await Promise.race([promise, timeoutPromise]);\n    }\n    finally {\n        if (timeoutTimer) {\n            clearTimeout(timeoutTimer);\n        }\n    }\n}\n/**\n * @internal\n */\nlet fs = null;\n/**\n * @internal\n */\nexport async function importFSPromises() {\n    if (!fs) {\n        try {\n            fs = await import('fs/promises');\n        }\n        catch (error) {\n            if (error instanceof TypeError) {\n                throw new Error('Cannot write to a path outside of a Node-like environment.');\n            }\n            throw error;\n        }\n    }\n    return fs;\n}\n/**\n * @internal\n */\nexport async function getReadableAsBuffer(readable, path) {\n    const buffers = [];\n    if (path) {\n        const fs = await importFSPromises();\n        const fileHandle = await fs.open(path, 'w+');\n        for await (const chunk of readable) {\n            buffers.push(chunk);\n            await fileHandle.writeFile(chunk);\n        }\n        await fileHandle.close();\n    }\n    else {\n        for await (const chunk of readable) {\n            buffers.push(chunk);\n        }\n    }\n    try {\n        return Buffer.concat(buffers);\n    }\n    catch (error) {\n        return null;\n    }\n}\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(client, handle) {\n    // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n    // ReadableStream.\n    if (!isNode) {\n        throw new Error('Cannot create a stream outside of Node.js environment.');\n    }\n    const { Readable } = await import('stream');\n    let eof = false;\n    return new Readable({\n        async read(size) {\n            if (eof) {\n                return;\n            }\n            const response = await client.send('IO.read', { handle, size });\n            this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n            if (response.eof) {\n                eof = true;\n                await client.send('IO.close', { handle });\n                this.push(null);\n            }\n        },\n    });\n}\n/**\n * @internal\n */\nexport async function setPageContent(page, content) {\n    // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n    // lifecycle event. @see https://crrev.com/608658\n    return page.evaluate(html => {\n        document.open();\n        document.write(html);\n        document.close();\n    }, content);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}