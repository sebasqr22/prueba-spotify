{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nexport class DiskComponent {\n  constructor(authService, route, http) {\n    this.authService = authService;\n    this.route = route;\n    this.http = http;\n    this.usuario = \"\";\n    this.apiUrl = 'https://api.spotify.com/v1/me';\n    this.spotifyApi = this.authService.getApi();\n  }\n  ngOnInit() {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if (!tieneError) {\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&').find(fragment => fragment.includes('access_token')).split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks();\n    } else {\n      this.logout();\n    }\n  }\n  getMe() {\n    var a = this.authService.getApi().getMe();\n    a.then(data => {\n      const elemento = document.getElementById('nombreCliente');\n      if (data.display_name) {\n        elemento.outerHTML = data.display_name;\n      } else {\n        elemento.outerHTML = data.id;\n      }\n    });\n  }\n  abrir(link) {\n    window.open(link, '_blank');\n  }\n  getMyTracks() {\n    this.authService.getApi().getMyTopTracks({\n      time_range: \"medium_term\",\n      limit: 10\n    }).then(response => {\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i + 1}`);\n        cancion.innerHTML = response.items[i].name;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, function (err) {\n      console.error(err);\n    });\n  }\n  logout() {\n    this.authService.logout();\n  }\n}\nDiskComponent.ɵfac = function DiskComponent_Factory(t) {\n  return new (t || DiskComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.HttpClient));\n};\nDiskComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DiskComponent,\n  selectors: [[\"app-disk\"]],\n  decls: 15,\n  vars: 1,\n  consts: [[3, \"click\"], [1, \"vinyl\"], [1, \"hole\"], [1, \"tracks\"], [1, \"track\"]],\n  template: function DiskComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_2_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(3, \"Logout\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1);\n      i0.ɵɵelement(5, \"div\", 2);\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵelement(7, \"div\", 4)(8, \"div\", 4)(9, \"div\", 4)(10, \"div\", 4)(11, \"div\", 4)(12, \"div\", 4)(13, \"div\", 4)(14, \"div\", 4);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.usuario);\n    }\n  },\n  styles: [\".album-cover[_ngcontent-%COMP%] {\\n    position: relative;\\n    width: 400px;\\n    height: 400px;\\n    \\n    background-color: black;\\n    background-size: cover;\\n    background-position: center;\\n    background-blur: 5px;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    overflow: hidden;\\n    z-index: 0;\\n    box-shadow: 6px 10px 10px black;\\n}\\n\\n.album-info[_ngcontent-%COMP%] {\\n    text-align: center;\\n    color: #fff;\\n    z-index: 2;\\n}\\n\\n.album-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n    font-size: 28px;\\n    margin-bottom: 10px;\\n}\\n\\n.album-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    font-size: 18px;\\n}\\n\\n.song-list[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-top: 20px;\\n    width: 100%;\\n}\\n\\n.column[_ngcontent-%COMP%] {\\n    width: 45%;\\n}\\n\\n.column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n    list-style: none;\\n    padding: 0;\\n}\\n\\n.column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    margin-bottom: 10px;\\n    font-size: 14px;\\n}\\n\\n.eye[_ngcontent-%COMP%]{\\n    position:absolute;\\n    top: 40px;\\n    left : 40px;\\n    z-index: 1;\\n}\\n\\n.heaven[_ngcontent-%COMP%]\\n{\\n    position:absolute;\\n    height:400px;\\n    width:400px;\\n    margin-left: 230px;\\n    margin-top: 42px;\\n    z-index: -1;\\n}\\n\\n.centrado[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    height: 100vh;\\n}\\n\\n.cursor[_ngcontent-%COMP%]{\\n    cursor: pointer;\\n}\\n\\n.vinyl[_ngcontent-%COMP%] {\\n    width: 200px;\\n    height: 200px;\\n    border-radius: 50%;\\n    background-color: #333;\\n    position: relative;\\n    overflow: hidden;\\n}\\n\\n.hole[_ngcontent-%COMP%] {\\n    width: 60px;\\n    height: 60px;\\n    border-radius: 50%;\\n    background-color: #fff;\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n}\\n\\n.tracks[_ngcontent-%COMP%] {\\n    position: absolute;\\n    width: 80%;\\n    height: 80%;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%) rotate(-45deg);\\n    box-sizing: border-box;\\n    padding: 10%;\\n}\\n\\n.track[_ngcontent-%COMP%] {\\n    width: 2px;\\n    height: 50%;\\n    background-color: #fff;\\n    position: absolute;\\n    left: 50%;\\n    transform: translateX(-50%);\\n    box-shadow: 0 0 5px #fff;\\n    box-sizing: border-box;\\n    padding: 0 10%;\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(1) {\\n    transform: rotate(22.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(2) {\\n    transform: rotate(67.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(3) {\\n    transform: rotate(112.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(4) {\\n    transform: rotate(157.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(5) {\\n    transform: rotate(202.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(6) {\\n    transform: rotate(247.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(7) {\\n    transform: rotate(292.5deg) translateY(-100%);\\n}\\n\\n.track[_ngcontent-%COMP%]:nth-of-type(8) {\\n    transform: rotate(337.5deg) translateY(-100%);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGlzay9kaXNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGFBQWE7SUFDYixrREFBa0Q7SUFDbEQsdUJBQXVCO0lBQ3ZCLHNCQUFzQjtJQUN0QiwyQkFBMkI7SUFDM0Isb0JBQW9CO0lBQ3BCLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsVUFBVTtJQUNWLCtCQUErQjtBQUNuQzs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsVUFBVTtBQUNkOztBQUVBO0lBQ0ksZUFBZTtJQUNmLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsU0FBUztJQUNULFdBQVc7SUFDWCxVQUFVO0FBQ2Q7O0FBRUE7O0lBRUksaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixRQUFRO0lBQ1IsU0FBUztJQUNULGdDQUFnQztBQUNwQzs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsV0FBVztJQUNYLFFBQVE7SUFDUixTQUFTO0lBQ1QsK0NBQStDO0lBQy9DLHNCQUFzQjtJQUN0QixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFNBQVM7SUFDVCwyQkFBMkI7SUFDM0Isd0JBQXdCO0lBQ3hCLHNCQUFzQjtJQUN0QixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksNENBQTRDO0FBQ2hEOztBQUVBO0lBQ0ksNENBQTRDO0FBQ2hEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEOztBQUVBO0lBQ0ksNkNBQTZDO0FBQ2pEIiwic291cmNlc0NvbnRlbnQiOlsiLmFsYnVtLWNvdmVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDQwMHB4O1xuICAgIGhlaWdodDogNDAwcHg7XG4gICAgLypiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ3NyYy9hc3NldHMvYnVubnkuanBlZycpOyovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1ibHVyOiA1cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB6LWluZGV4OiAwO1xuICAgIGJveC1zaGFkb3c6IDZweCAxMHB4IDEwcHggYmxhY2s7XG59XG5cbi5hbGJ1bS1pbmZvIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgei1pbmRleDogMjtcbn1cblxuLmFsYnVtLWluZm8gaDEge1xuICAgIGZvbnQtc2l6ZTogMjhweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4uYWxidW0taW5mbyBoMiB7XG4gICAgZm9udC1zaXplOiAxOHB4O1xufVxuXG4uc29uZy1saXN0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4uY29sdW1uIHtcbiAgICB3aWR0aDogNDUlO1xufVxuXG4uY29sdW1uIHVsIHtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIHBhZGRpbmc6IDA7XG59XG5cbi5jb2x1bW4gdWwgbGkge1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4uZXlle1xuICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgIHRvcDogNDBweDtcbiAgICBsZWZ0IDogNDBweDtcbiAgICB6LWluZGV4OiAxO1xufVxuXG4uaGVhdmVuXG57XG4gICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgaGVpZ2h0OjQwMHB4O1xuICAgIHdpZHRoOjQwMHB4O1xuICAgIG1hcmdpbi1sZWZ0OiAyMzBweDtcbiAgICBtYXJnaW4tdG9wOiA0MnB4O1xuICAgIHotaW5kZXg6IC0xO1xufVxuXG4uY2VudHJhZG8ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBoZWlnaHQ6IDEwMHZoO1xufVxuXG4uY3Vyc29ye1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnZpbnlsIHtcbiAgICB3aWR0aDogMjAwcHg7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLmhvbGUge1xuICAgIHdpZHRoOiA2MHB4O1xuICAgIGhlaWdodDogNjBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xufVxuXG4udHJhY2tzIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgd2lkdGg6IDgwJTtcbiAgICBoZWlnaHQ6IDgwJTtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC00NWRlZyk7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBwYWRkaW5nOiAxMCU7XG59XG5cbi50cmFjayB7XG4gICAgd2lkdGg6IDJweDtcbiAgICBoZWlnaHQ6IDUwJTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgIGJveC1zaGFkb3c6IDAgMCA1cHggI2ZmZjtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIHBhZGRpbmc6IDAgMTAlO1xufVxuXG4udHJhY2s6bnRoLW9mLXR5cGUoMSkge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDIyLjVkZWcpIHRyYW5zbGF0ZVkoLTEwMCUpO1xufVxuXG4udHJhY2s6bnRoLW9mLXR5cGUoMikge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDY3LjVkZWcpIHRyYW5zbGF0ZVkoLTEwMCUpO1xufVxuXG4udHJhY2s6bnRoLW9mLXR5cGUoMykge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDExMi41ZGVnKSB0cmFuc2xhdGVZKC0xMDAlKTtcbn1cblxuLnRyYWNrOm50aC1vZi10eXBlKDQpIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxNTcuNWRlZykgdHJhbnNsYXRlWSgtMTAwJSk7XG59XG5cbi50cmFjazpudGgtb2YtdHlwZSg1KSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMjAyLjVkZWcpIHRyYW5zbGF0ZVkoLTEwMCUpO1xufVxuXG4udHJhY2s6bnRoLW9mLXR5cGUoNikge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDI0Ny41ZGVnKSB0cmFuc2xhdGVZKC0xMDAlKTtcbn1cblxuLnRyYWNrOm50aC1vZi10eXBlKDcpIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyOTIuNWRlZykgdHJhbnNsYXRlWSgtMTAwJSk7XG59XG5cbi50cmFjazpudGgtb2YtdHlwZSg4KSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzM3LjVkZWcpIHRyYW5zbGF0ZVkoLTEwMCUpO1xufVxuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nDiskComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DiskComponent,\n  factory: DiskComponent.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["DiskComponent","constructor","authService","route","http","spotifyApi","getApi","ngOnInit","tieneError","snapshot","queryParams","undefined","token","fragment","split","find","includes","setAccessToken","getMe","getMyTracks","logout","a","then","data","elemento","document","getElementById","display_name","outerHTML","id","abrir","link","window","open","getMyTopTracks","time_range","limit","response","i","items","length","cancion","innerHTML","name","className","addEventListener","uri","err","console","error","selectors","decls","vars","consts","template","i0","ctx","factory","providedIn"],"sourceRoot":"","sources":["/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.ts","/Users/sebastianqr.2208/Desktop/Status Tech/prueba-spotify/src/app/disk/disk.component.html"],"sourcesContent":["import {Component, Injectable, OnInit} from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport { ActivatedRoute } from '@angular/router';\nimport { from } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, map } from 'rxjs/operators';\n@Injectable({\n  providedIn: 'root'\n})\n@Component({\n  selector: 'app-disk',\n  templateUrl: './disk.component.html',\n  styleUrls: ['./disk.component.css']\n})\nexport class DiskComponent implements OnInit{\n  private spotifyApi: SpotifyWebApi.SpotifyWebApiJs;\n  usuario: string | undefined = \"\";\n  private apiUrl = 'https://api.spotify.com/v1/me';\n  constructor(private authService: AuthService, private route: ActivatedRoute, private http: HttpClient) {\n    this.spotifyApi = this.authService.getApi();\n  }\n  \n  ngOnInit(): void {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if(!tieneError){\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&')\n          .find(fragment => fragment.includes('access_token'))\n          .split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks();\n    }\n    else{\n      this.logout();\n    }\n  }\n  \n  getMe(){\n   var a = this.authService.getApi().getMe()\n   a.then((data) =>{\n     const elemento = document.getElementById('nombreCliente') as HTMLInputElement\n     if(data.display_name){\n       elemento.outerHTML = data.display_name;\n     }\n     else{\n       elemento.outerHTML = data.id;\n     }\n    })\n  }\n  \n  abrir(link:string){\n    window.open(link, '_blank');\n  }\n\n  getMyTracks(){\n    this.authService.getApi().getMyTopTracks({\n      time_range: \"medium_term\",\n      limit:10\n    }).then((response) => {\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i+1}`) as HTMLInputElement\n        cancion.innerHTML = response.items[i].name;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, function (err){\n      console.error((err))\n    })\n  }\n  \n  logout(){\n    this.authService.logout()\n  }\n}\n","<h1>{{usuario}}</h1>\n<!--\n<div style=\"position: relative; left: 0; top: 0;\" id=\"img\">\n    <div class=\"album-cover eye\">\n        <div class=\"vinyl-cover\"></div>\n        <div class=\"album-info\">\n            <h1>Nombre del Álbum</h1>\n            <h2 id=\"nombreCliente\">Artista</h2>\n            <div class=\"song-list\">\n                <div class=\"column\">\n                    <ul>\n                        <li id=\"cancion1\"></li>\n                        <li id=\"cancion2\"></li>\n                        <li id=\"cancion3\"></li>\n                        <li id=\"cancion4\"></li>\n                        <li id=\"cancion5\"></li>\n                    </ul>\n                </div>\n                <div class=\"column\">\n                    <ul>\n                        <li id=\"cancion6\"></li>\n                        <li id=\"cancion7\"></li>\n                        <li id=\"cancion8\"></li>\n                        <li id=\"cancion9\"></li>\n                        <li id=\"cancion10\"></li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <img src=\"assets/ase.png\" class=\"heaven\"/>\n</div> -->\n\n<button (click)=\"logout()\">Logout</button>\n\n<div class=\"vinyl\">\n    <div class=\"hole\"></div>\n    <div class=\"tracks\">\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n        <div class=\"track\"></div>\n    </div>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}